<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
        google.charts.load('current', { packages: ['corechart'] });
        google.charts.setOnLoadCallback(drawChart);

        var chart;
        var data;

        function drawChart() {
            data = google.visualization.arrayToDataTable([
                ['Category', 'Value'],
                ['ePayments', 60],
                ['Accounts', 25],
                ['Cash', 10]
            ]);

            var options = {
                title: 'Job Distribution',
                pieHole: 0.4,
                width: '100%',
                height: '100%',
                colors: ['#FF5733', '#33FF57', '#3357FF', '#FFC300'],
                legend: { position: 'bottom' }
            };

            chart = new google.visualization.PieChart(document.getElementById('piechart'));
            chart.draw(data, options);
        }

        function updateChart(jsonData) {
            console.log("Updating chart with data:", jsonData);
            var newData = JSON.parse(jsonData);
            var formattedData = [['Category', 'Value']];

            newData.forEach(function(item) {
                formattedData.push([item[0], item[1]]);
            });

            data = google.visualization.arrayToDataTable(formattedData);
            chart.draw(data, { title: 'Updated Job Distribution', pieHole: 0.4, legend: { position: 'bottom' } });
        }
    </script>
    <style>
        html, body, #piechart {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
        }
    </style>
</head>
<body>
<div id="piechart"></div>
</body>
</html>
